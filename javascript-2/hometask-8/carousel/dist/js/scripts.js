function Container(){this.id="",this.className="",this.htmlCode=""}function Carousel(){Container.call(this,"carousel"),this.widthCarousel=0,this.leftString=0,this.productsSlide=0,this.productsFirst=1,this.countProducts=0,this.productsItems=[],this.widthCarouselNav=function(){return $(".carousel__nav").width()},this.widthProduct=function(){return $(".carousel__products-container").width()+20},this.widthString=function(){var t=this.widthProduct()*this.countProducts;return $(".carousel__products-string").css({width:t}),t},this.loadCarouselItems(),this.render(),this.renderDots(),this.productsBasket=[],this.renderBasket(),this.keyDown(),this.arrows()}Container.prototype.render=function(){return this.htmlCode},Carousel.prototype=Object.create(Container.prototype),Carousel.prototype.constructor=Carousel,Carousel.prototype.arrows=function(t){"right"==t?(this.leftString-=this.widthProduct(),this.productsFirst++):"left"==t?(this.leftString+=this.widthProduct(),this.productsFirst--):isNaN(t)||(this.leftString=-(t-1)*this.productsSlide*this.widthProduct(),this.productsFirst=t*this.productsSlide),this.leftString>0&&(this.leftString=0,this.productsFirst=1),this.leftString<this.widthProduct()*this.productsSlide-this.widthString()&&(this.leftString=this.widthProduct()*this.productsSlide-this.widthString(),this.productsFirst=this.countProducts-this.productsSlide+1),$(".carousel__products-string").css({left:this.leftString}),this.renderDots(".carousel__dots-items")},Carousel.prototype.render=function(t){$(".carousel").css({width:this.widthCarousel}),this.widthCarouselNav(),this.widthProduct(),this.widthString(),$(t).empty();for(var s in this.productsItems){var e="carousel__products-container_"+s,r=$("<div />",{class:"carousel__products-container",id:e});r.appendTo(t),$("#"+e).draggable({revert:"invalid",helper:function(){return $(this).clone()},appendTo:"body",scroll:!1,start:function(){$(this).css({opacity:0})},stop:function(){$(this).css({opacity:100})}});var o=$("<div />",{class:"carousel__products-items"});o.appendTo(r);var a="carousel__products-items-images_"+s;$("<div />",{class:"carousel__products-items-images",id:a,style:"background-image: url("+this.productsItems[s].image+")"}).appendTo(o),$("<div />",{class:"carousel__products-items-titles",text:this.productsItems[s].title}).appendTo(o),$("<div />",{class:"carousel__products-items-descriptions",text:this.productsItems[s].description}).appendTo(o),$("<div />",{class:"carousel__products-items-prices",text:this.productsItems[s].price+"$"}).appendTo(o),$("<div />",{class:"carousel__products-items-basket",text:"В корзину"}).appendTo(o)}},Carousel.prototype.renderDots=function(t){var s=this;$(t).empty();for(var e=1;e<=this.countProducts/this.productsSlide;++e){var r="";Math.ceil(this.productsFirst/this.productsSlide)==e&&(r=" carousel__dots-items-links-rounds_active");var o=$("<span />",{class:"carousel__dots-items-links"});o.appendTo(t);var a="carousel__dots-items-links-rounds_"+e;$("<span />",{id:a,class:"carousel__dots-items-links-rounds"+r}).appendTo(o),$("#"+a).on("click",function(){s.arrows($(this).attr("id").split("_")[3])})}},Carousel.prototype.renderBasket=function(t){if($(t).empty(),this.productsBasket.length>0){var s=$("<div />",{class:"basket__table-row basket__table-row_header"});s.appendTo(t);var e="basket__table-cell basket__table-cell_numbers",r=$("<span />",{class:e,text:"№"});r.appendTo(s);var o="basket__table-cell basket__table-cell_titles",a=$("<span />",{class:o,text:"Наименование"});a.appendTo(s);var i="basket__table-cell basket__table-cell_photos",l=$("<span />",{class:i,text:"Фото"});l.appendTo(s);var c="basket__table-cell basket__table-cell_descriptions",d=$("<span />",{class:c,text:"Описание"});d.appendTo(s);var n="basket__table-cell basket__table-cell_prices",p=$("<span />",{class:n,text:"Цена"});p.appendTo(s);var u="basket__table-cell basket__table-cell_del",_=$("<span />",{class:u,text:"Операция"});_.appendTo(s);var h=0;for(var b in this.productsBasket){var k=this.productsBasket[b],v=$("<div />",{class:"basket__table-row basket__table-row_products"});v.appendTo(t);e="basket__table-cell basket__table-cell_numbers";(r=$("<span />",{class:e})).appendTo(v);o="basket__table-cell basket__table-cell_titles";(a=$("<span />",{class:o,text:this.productsItems[k].title})).appendTo(v);i="basket__table-cell basket__table-cell_photos";(l=$("<span />",{class:i,style:"background-image: url("+this.productsItems[k].image+")"})).appendTo(v);c="basket__table-cell basket__table-cell_descriptions";(d=$("<span />",{class:c,text:this.productsItems[k].description})).appendTo(v);var f=this.productsItems[k].price,n="basket__table-cell basket__table-cell_prices";(p=$("<span />",{class:n,text:f+"$"})).appendTo(v),h+=f;var u="basket__table-cell basket__table-cell_del",m="basket__table-cell_"+k;(_=$("<span />",{class:u,id:m,text:"Удалить"})).appendTo(v),$("#"+m).on("click",function(){$("#"+this.id).parent().remove()})}var w=$("<div />",{class:"basket__table-row basket__table-row_sum"});w.appendTo(t);for(var g=1;g<=5;g++){$("<span />",{class:"basket__table-cell",html:"&nbsp;"}).appendTo(w)}$("<span />",{class:"basket__table-cell basket__table-cell_total",text:"ИТОГО: "+h+"$"}).appendTo(w)}},Carousel.prototype.loadCarouselItems=function(){$.get({url:"./json/carousel.json",dataType:"json",error:function(){console.log("JSON load: Error!")},success:function(t){console.log("JSON-file load: Ок!"),this.widthCarousel=t.widthCarousel,this.productsSlide=t.productsSlide,this.countProducts=t.products.length;for(var s in t.products)this.productsItems.push(t.products[s]);this.render(".carousel__products-string"),this.renderDots(".carousel__dots-items"),this.renderBasket(".basket__table"),$(".carousel").css({opacity:100})},context:this})},Carousel.prototype.keyDown=function(){var t=this,s={37:"left",39:"right"};$("body").on("keydown",function(e){e.keyCode in s&&t.arrows(s[e.keyCode])})},$(document).ready(function(){var t=new Carousel;$(".carousel__nav-arrows-links_left").on("click",function(){t.arrows("left")}),$(".carousel__nav-arrows-links_right").on("click",function(){t.arrows("right")}),$(".basket").droppable({drop:function(s,e){$(".basket").css("border","solid 1px white");var r=e.draggable[0].id,o=$("#"+r).attr("id").split("_")[3];t.productsBasket.push(o),t.renderBasket(".basket__table"),console.log(t.productsBasket,o,t.productsItems[o])},over:function(t,s){$(".basket").css("border","solid 1px #007DC7")}})});