function Container(){this.id="",this.className="",this.htmlCode=""}function Carousel(){Container.call(this,"carousel"),this.widthCarousel=0,this.leftString=0,this.productsSlide=0,this.productsFirst=0,this.countProducts=0,this.productsItems=[],this.widthCarouselNav=function(){return $(".carousel__nav").width()},this.widthProduct=function(){return $(".carousel__products-container").width()+20},this.widthString=function(){var t=this.widthProduct()*this.countProducts;return $(".carousel__products-string").css({width:t}),t},this.loadCarouselItems(),this.render(),this.renderDots(),this.keyDown()}Container.prototype.render=function(){return this.htmlCode},Carousel.prototype=Object.create(Container.prototype),Carousel.prototype.constructor=Carousel,Carousel.prototype.arrows=function(t){"right"==t?(this.leftString-=this.widthProduct(),this.productsFirst++):(this.leftString+=this.widthProduct(),this.productsFirst--),this.leftString>0&&(this.leftString=0,this.productsFirst=1),this.leftString<this.widthProduct()*this.productsSlide-this.widthString()&&(this.leftString=this.widthProduct()*this.productsSlide-this.widthString(),this.productsFirst=this.countProducts-this.productsSlide+1),$(".carousel__products-string").css({left:this.leftString}),console.log(this.productsFirst,this.leftString,this.widthCarouselNav(),this.widthProduct(),this.widthString()),this.renderDots(".carousel__dots-items")},Carousel.prototype.render=function(t){$(".carousel").css({width:this.widthCarousel}),this.widthCarouselNav(),this.widthProduct(),this.widthString(),$(t).empty();for(var s in this.productsItems){var o=$("<div />",{class:"carousel__products-container"});o.appendTo(t);var r=$("<div />",{class:"carousel__products-items"});r.appendTo(o),$("<div />",{class:"carousel__products-items-images",style:"background-image: url("+this.productsItems[s].image+")"}).appendTo(r),$("<div />",{class:"carousel__products-items-titles",text:this.productsItems[s].title}).appendTo(r),$("<div />",{class:"carousel__products-items-descriptions",text:this.productsItems[s].description}).appendTo(r),$("<div />",{class:"carousel__products-items-prices",text:this.productsItems[s].price}).appendTo(r),$("<div />",{class:"carousel__products-items-basket",text:"В корзину"}).appendTo(r)}},Carousel.prototype.renderDots=function(t){$(t).empty(),console.log("dots:",Math.round((this.productsFirst+1)/this.productsSlide));for(var s=1;s<=this.countProducts/this.productsSlide;s++){var o="";Math.round((this.productsFirst+3)/this.productsSlide)==s&&(o=" carousel__dots-items-links-rounds_active");var r=$("<span />",{class:"carousel__dots-items-links"});r.appendTo(t),$("<span />",{class:"carousel__dots-items-links-rounds"+o}).appendTo(r)}},Carousel.prototype.loadCarouselItems=function(){$.get({url:"./json/carousel.json",dataType:"json",error:function(){console.log("JSON load: Error!")},success:function(t){console.log("JSON load: Ок!"),this.widthCarousel=t.widthCarousel,this.productsSlide=t.productsSlide,this.countProducts=t.products.length;for(var s in t.products)this.productsItems.push(t.products[s]);this.render(".carousel__products-string"),this.renderDots(".carousel__dots-items")},context:this})},Carousel.prototype.keyDown=function(){var t=this,s={37:"left",39:"right"};$("body").on("keydown",function(o){o.keyCode in s&&t.arrows(s[o.keyCode])})},$(document).ready(function(){var t=new Carousel;$(".carousel__nav-arrows-links_left").on("click",function(){t.arrows("left")}),$(".carousel__nav-arrows-links_right").on("click",function(){t.arrows("right")})});